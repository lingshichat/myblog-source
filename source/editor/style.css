/* =========================================
   Editor Design System
   Theme: Dark Glassmorphism + Skeuomorphism
   (与 Admin 保持一致)
   ========================================= */

:root {
    /* 品牌色 */
    --primary-color: #3b70fc;
    --primary-gradient: linear-gradient(135deg, #3b70fc 0%, #667eea 100%);
    --primary-glow: rgba(59, 112, 252, 0.5);

    /* 背景层次 */
    --bg-base: url('/img/bg.jpg');

    /* 玻璃质感 */
    --glass-bg: rgba(30, 60, 114, 0.65);
    --glass-border: 1px solid rgba(255, 255, 255, 0.18);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);

    /* 文字 */
    --text-primary: #fff;
    --text-secondary: rgba(255, 255, 255, 0.7);
    --text-muted: rgba(255, 255, 255, 0.4);

    /* 状态色 */
    --success: #10b981;
    --warning: #fbbf24;
    --danger: #ef4444;

    /* 动画曲线 */
    --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
    --transition-speed: 0.3s;
}

body {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    color: var(--text-primary);
    background: url('/img/bg.jpg') no-repeat center center fixed;
    background-size: cover;
    height: 100vh;
    overflow: hidden;
    position: relative;
}

/* 全局预模糊底板 (与 Admin 一致的深蓝色调) */
body::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 10, 30, 0.6);
    /* 深蓝色遮罩，突出高级感 */
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    z-index: 0;
}

[v-cloak] {
    display: none;
}

/* 动画定义 */
/* 动画定义 - 极致丝滑 */
@keyframes fadeOverlay {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes cardEntrance {
    0% {
        opacity: 0;
        transform: scale(0.92) translateY(10px);
    }

    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes float {
    0% {
        transform: translateY(0px) rotate(0deg);
    }

    50% {
        transform: translateY(-8px) rotate(2deg);
    }

    100% {
        transform: translateY(0px) rotate(0deg);
    }
}

/* 登录页淡出动画 */
@keyframes fadeOut {
    from {
        opacity: 1;
        transform: scale(1);
    }

    to {
        opacity: 0;
        transform: scale(0.95);
    }
}

/* 编辑器淡入动画 */
@keyframes fadeInEditor {
    from {
        opacity: 0;
        transform: scale(1.02);
    }

    to {
        opacity: 1;
        transform: none;
        /* 关键修复：移除 transform 以避免破坏 position: fixed 全屏行为 */
    }
}

/* 玻璃质感滚动条 */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.4);
}

::-webkit-scrollbar-corner {
    background: transparent;
}

/* =========================================
   1. 登录页重构 (Premium Glass Capsule Design)
   ========================================= */
.login-container {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    /* 移除背景遮罩，仅保留 body::before 的全局遮罩 */
    background: transparent;
    animation: fadeOverlay 0.5s ease-out;
}

/* 登录页淡出过渡 */
.login-container.fade-out {
    animation: fadeOut 0.6s ease-in-out forwards;

    /* 
       注意：404 页面使用的是 body::before 来实现全局模糊
       但这里为了避免改动 HTML 结构，我们保持背景清晰，
       只让卡片模糊，这与"参考404窗口模糊"的需求一致。
       如果用户需要全屏背景也是模糊的，那应该是在 body 上做文章。
       但现在的重点是"窗口模糊不对"，所以先解决窗口问题。
    */
}

.login-card {
    /* 1:1 复刻 404.html 的 .glass-card 样式 */
    background: rgba(0, 0, 0, 0.5);
    /* var(--glass-bg) */

    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);

    border: 1px solid rgba(255, 255, 255, 0.08);
    /* var(--glass-border) */
    border-radius: 12px;
    /* 404 是 12px，之前改成了 24px，现在回归 12px */
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);

    padding: 3.5rem 3rem;
    text-align: center;
    max-width: 420px;
    width: 90%;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    overflow: hidden;

    animation: cardEntrance 1s ease-out;
    /* 恢复简单动画 */
}

/* 移除伪元素，回归原始实现 */
.login-card::before {
    display: none;
}

.login-icon {
    font-size: 3.5rem;
    background: linear-gradient(135deg, #fff 30%, #a5b4fc 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 20px rgba(165, 180, 252, 0.4));
    animation: float 5s ease-in-out infinite;
    margin-bottom: 1.5rem;
    /* 确保图标在玻璃之上 */
    position: relative;
    z-index: 2;
}

.login-title {
    font-weight: 400;
    font-size: 1.4rem;
    letter-spacing: 3px;
    margin-bottom: 2.5rem;
    color: rgba(255, 255, 255, 0.9);
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* 胶囊玻璃输入框 */
.login-input-area {
    position: relative;
    width: 100%;
    margin-bottom: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 50px;
    background: rgba(0, 0, 0, 0.2);
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
}

.login-input-area:focus-within {
    background: rgba(0, 0, 0, 0.3);
    border-color: var(--primary-color);
    box-shadow: 0 0 0 1px var(--primary-color), 0 0 20px rgba(59, 112, 252, 0.5), inset 0 2px 5px rgba(0, 0, 0, 0.2);
}

.login-input-area input {
    flex: 1;
    background: transparent;
    border: none;
    color: white;
    padding: 16px 24px;
    font-size: 1.05rem;
    border-radius: 50px;
    text-align: center;
    letter-spacing: 1px;
}

.login-input-area input:focus {
    outline: none;
}

.login-input-area input::placeholder {
    color: rgba(255, 255, 255, 0.3);
    font-size: 0.95rem;
    letter-spacing: 0;
}

/* 箭头按钮 - 整合在胶囊内 */
.login-btn {
    background: rgba(255, 255, 255, 0.08);
    border: none;
    color: rgba(255, 255, 255, 0.6);
    cursor: pointer;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 6px;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* 激活态：输入内容/聚焦时按钮变亮 */
.login-input-area:focus-within .login-btn,
.login-input-area input:not(:placeholder-shown)+.login-btn {
    background: var(--primary-color);
    color: white;
    box-shadow: 0 0 15px var(--primary-glow);
}

.login-btn:hover {
    transform: rotate(-45deg) scale(1.1);
    background: var(--primary-color);
    color: white;
    box-shadow: 0 0 20px var(--primary-glow);
}

/* 记住密码 - 协调设计 */
.checkbox-group {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    cursor: pointer;
    user-select: none;
    transition: all 0.3s;
    background: rgba(255, 255, 255, 0.03);
    /* 微弱的胶囊背景 */
    padding: 6px 16px;
    border-radius: 20px;
    border: 1px solid transparent;
}

.checkbox-group:hover {
    background: rgba(255, 255, 255, 0.08);
    color: white;
    border-color: rgba(255, 255, 255, 0.1);
}

/* 隐藏原生 Checkbox */
.checkbox-group input {
    display: none;
}

/* 自定义 Checkbox 样式 */
.checkbox-group label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}

.checkbox-group label::before {
    content: '';
    display: inline-block;
    width: 14px;
    height: 14px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 4px;
    /* 柔和的方角 */
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
}

.checkbox-group input:checked+label {
    color: white;
}

.checkbox-group input:checked+label::before {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    box-shadow: 0 0 10px var(--primary-glow);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='4' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");
    background-size: 80%;
    background-repeat: no-repeat;
    background-position: center;
}

/* 错误提示 - 悬浮气泡 */
.error-toast {
    margin-top: 24px;
    background: rgba(255, 71, 87, 0.15);
    border: 1px solid rgba(255, 71, 87, 0.3);
    color: #ffccc7;
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 0.9rem;
    animation: fadeIn 0.3s;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* =========================================
   2. 编辑器布局优化
   ========================================= */
.editor-container {
    height: 100vh;
    display: flex;
    flex-direction: column;
    background: transparent;
    animation: fadeInEditor 0.8s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
    position: relative;
    z-index: 10;
    /* 确保在预模糊层之上 */
}

.glass-nav {
    height: 60px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 24px;
    z-index: 200;

    /* 拟物玻璃拟态导航 (与 Admin 一致) */
    background: rgba(10, 20, 40, 0.7);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);

    /* 拟物阴影效果 */
    box-shadow:
        0 4px 30px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.nav-left,
.nav-right {
    display: flex;
    align-items: center;
    gap: 15px;
}

.logo-text {
    font-weight: 700;
    letter-spacing: 2px;
    font-size: 1.1rem;
    opacity: 0.8;
}

.save-status {
    font-size: 0.9rem;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 6px;
}

.main-content {
    flex: 1;
    display: flex;
    overflow: hidden;
    /* 修复：overflow: hidden 确保 flex 容器高度被限制 */
    min-height: 0;
    /* 修复：允许 flex 子元素正确缩放 */
    padding: 24px;
    gap: 24px;
    background: transparent;
}

/* 侧边栏 - 拟物玻璃拟态 (与 Admin 一致) */
.sidebar {
    width: 260px;
    /* 深色玻璃背景 */
    background: rgba(10, 20, 40, 0.7);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    /* 拟物阴影 */
    box-shadow:
        var(--glass-shadow),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: transform 0.3s var(--ease-out-expo);
}

.sidebar-header {
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.sidebar-header h3 {
    margin: 0;
    font-size: 0.9rem;
    color: var(--text-muted);
    letter-spacing: 1px;
}

.refresh-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    transition: 0.3s;
}

.refresh-btn:hover {
    color: white;
    transform: rotate(180deg);
}

.sidebar-actions {
    padding: 0 16px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    display: flex;
    gap: 8px;
    align-items: center;
}

.post-list {
    flex: 1;
    overflow-y: auto;
    list-style: none;
    padding: 12px;
    margin: 0;
}

.post-list li {
    padding: 12px 16px;
    border-radius: 12px;
    cursor: pointer;
    margin-bottom: 6px;
    color: var(--text-secondary);
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    font-size: 0.95rem;
    border: 1px solid transparent;
    position: relative;
    overflow: hidden;
    /* 拟物内阴影 */
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

.post-list li:hover {
    background: rgba(255, 255, 255, 0.08);
    color: white;
    transform: translateX(4px);
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.08),
        0 2px 8px rgba(0, 0, 0, 0.2);
}

.post-list li.active {
    background: linear-gradient(90deg, rgba(59, 112, 252, 0.25) 0%, rgba(59, 112, 252, 0.05) 100%);
    color: white;
    font-weight: 500;
    border: 1px solid rgba(59, 112, 252, 0.3);
    /* 拟物发光效果 */
    box-shadow:
        0 0 15px var(--primary-glow),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.post-list li.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 24px;
    background: var(--primary-color);
    border-radius: 0 4px 4px 0;
    box-shadow: 0 0 15px var(--primary-glow);
}

/* 编辑/阅读主区域 - 容器 */
.editor-area {
    flex: 1;
    background: transparent;
    border: none;
    box-shadow: none;
    border-radius: 0;
    overflow: hidden;
    /* 修复：限制容器高度，使子元素滚动正常 */
    min-height: 0;
    /* 修复：允许 flex 子元素正确缩放 */
    position: relative;
    display: flex;
    flex-direction: column;
}

/* 阅读模式 - 拟物玻璃拟态 (与 Admin 一致) */
.reader-mode {
    flex: 1;
    overflow-y: auto;
    padding: 40px;
    height: 100%;
    /* 深色玻璃背景 */
    background: rgba(10, 20, 40, 0.7);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    /* 拟物阴影 */
    box-shadow:
        var(--glass-shadow),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

/* 写作模式 - 拟物玻璃拟态 (与 Admin 一致) */
.writer-mode {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    height: 100%;
    /* 深色玻璃背景 */
    background: rgba(10, 20, 40, 0.7);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    /* 拟物阴影 */
    box-shadow:
        var(--glass-shadow),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.editor-wrapper {
    flex: 1;
    overflow: hidden;
    position: relative;
    display: flex;
    flex-direction: column;
}

.EasyMDEContainer {
    flex: 1;
    display: flex;
    flex-direction: column;
    height: 100%;
}

.CodeMirror {
    flex: 1;
    height: 100% !important;
    /* 关键修复：允许 CodeMirror 内部滚动条生效，而不是撑开外部容器 */
    min-height: 0;
    /* Flex 子项滚动必须 */
    border-radius: 0 0 8px 8px;
    background: transparent;
}


/* 新建/更多按钮 - 拟物胶囊风格 */
.new-post-btn {
    border-radius: 50px;
    padding: 8px 20px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    cursor: pointer;
    transition: all 0.3s var(--ease-out-expo);
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    flex: 1;
    justify-content: center;
    /* 拟物阴影 */
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 2px 4px rgba(0, 0, 0, 0.2);
}

.new-post-btn:hover {
    background: var(--primary-color);
    border-color: var(--primary-color);
    box-shadow:
        0 0 15px var(--primary-glow),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
}

.new-post-btn:active {
    transform: translateY(0);
    box-shadow:
        inset 0 2px 4px rgba(0, 0, 0, 0.3),
        0 0 10px var(--primary-glow);
}

.nav-btn {
    border-radius: 50px;
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.05);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s var(--ease-out-expo);
    /* 拟物阴影 */
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.nav-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 2px 8px rgba(0, 0, 0, 0.2);
}

.nav-btn:active {
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.trash-toggle-btn {
    border-radius: 50%;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.05);
    color: var(--text-muted);
    cursor: pointer;
    transition: 0.3s;
}

.trash-toggle-btn:hover {
    background: rgba(255, 71, 87, 0.2);
    border-color: rgba(255, 71, 87, 0.4);
    color: #ffccc7;
    box-shadow: 0 0 15px rgba(255, 71, 87, 0.2);
}

/* =========================================
   Mobile Adaptation (Need to be placed before specific overrides or at end)
   But for structural clarity, we keep basic logic here.
   See bottom of file for strict overrides.
   ========================================= */


/* 元数据输入区域 */
.meta-tags-container {
    display: flex;
    flex-direction: row;
    /* Change to row */
    gap: 12px;
    align-items: flex-start;
    /* Align top for multi-line tags */
}

.meta-group {
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 6px 12px;
    transition: 0.3s;
    height: 42px;
    /* Fixed height for consistency */
}

/* Date takes fixed width, others expand */
.meta-group:first-child {
    flex: 0 0 200px;
}

.meta-group.flex-group {
    flex: 1;
    /* Allow expansion when needed */
    min-height: 42px;
    /* Keep same alignment as other meta-groups */
}

.meta-group:focus-within {
    background: rgba(0, 0, 0, 0.2);
    border-color: var(--primary-color);
}

.input-icon {
    color: var(--text-muted);
    margin-right: 10px;
    font-size: 0.9rem;
    /* Icon alignment handled by flex */
}


/* 玻璃态日期选择器 */
.glass-date-input {
    background: transparent;
    border: none;
    color: white;
    font-family: inherit;
    font-size: 0.9rem;
    width: 100%;
    outline: none;
    color-scheme: dark;
    padding: 0;
}

.glass-date-input::-webkit-calendar-picker-indicator {
    filter: invert(0.8);
    cursor: pointer;
    opacity: 0.6;
    transition: 0.2s;
}

.glass-date-input::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
}

/* 胶囊容器 */

.capsule-container {
    flex: 1;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
    /* Inherit height from parent */
}

.capsule-tag {
    background: rgba(59, 112, 252, 0.2);
    color: #fff;
    padding: 2px 10px;
    border-radius: 20px;
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: 6px;
    user-select: none;
    border: 1px solid rgba(59, 112, 252, 0.3);
    height: 24px;
}

.capsule-tag i {
    cursor: pointer;
    font-size: 0.7rem;
    opacity: 0.7;
    transition: 0.2s;
}

.capsule-tag i:hover {
    opacity: 1;
    color: #ffccc7;
}

.category-tag {
    background: rgba(16, 185, 129, 0.2);
    /* Green tint for categories */
    border-color: rgba(16, 185, 129, 0.3);
}

.capsule-input {
    background: transparent;
    border: none;
    color: white;
    padding: 0;
    margin: 0;
    flex: 1;
    min-width: 60px;
    outline: none;
    font-size: 0.9rem;
    line-height: normal;
    /* Ensure vertical center alignment */
}

/* 标题输入行 */
.title-input {
    border-bottom: none;
}

/* Remove underline style */
.meta-header {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 16px;
    padding: 12px 20px;
    border: 1px solid rgba(255, 255, 255, 0.05);
    display: flex;
    align-items: center;
}

.reader-mode {
    flex: 1;
    overflow-y: auto;
    padding: 40px 60px;
    animation: fadeIn 0.4s;
}

.reader-header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 20px;
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.reader-header h1 {
    margin: 0;
    font-size: 2rem;
    color: white;
    line-height: 1.3;
    flex: 1;
}

.reader-actions .edit-btn {
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    border-radius: 20px;
    cursor: pointer;
    transition: 0.3s;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 6px;
}

.reader-actions .edit-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

.reader-actions .delete-btn {
    padding: 8px 16px;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: #fca5a5;
    border-radius: 20px;
    cursor: pointer;
    transition: 0.3s;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 6px;
}

.reader-actions .delete-btn:hover {
    background: rgba(239, 68, 68, 0.2);
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.2);
    color: #fff;
}

.restore-btn {
    padding: 8px 20px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    border: none;
    color: white;
    border-radius: 20px;
    cursor: pointer;
    transition: 0.3s;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 6px;
    box-shadow: 0 4px 6px rgba(16, 185, 129, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.restore-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.restore-btn:active {
    transform: scale(0.96);
}

.destroy-btn {
    padding: 8px 20px;
    background: linear-gradient(135deg, #ef4444 0%, #b91c1c 100%);
    border: none;
    color: white;
    border-radius: 20px;
    cursor: pointer;
    transition: 0.3s;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 6px;
    box-shadow: 0 4px 6px rgba(239, 68, 68, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.destroy-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(239, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.destroy-btn:active {
    transform: scale(0.96);
}



.reader-actions {
    display: flex;
    align-items: center;
}

.reader-meta {
    margin-bottom: 25px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
}

/* 拟物化胶囊 (Reader Mode) */
.meta-capsule {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    border-radius: 50px;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.9);

    /* 玻璃拟物基底 */
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
        2px 2px 5px rgba(0, 0, 0, 0.2),
        inset 1px 1px 1px rgba(255, 255, 255, 0.1);

    transition: all 0.3s ease;
    cursor: default;
    user-select: none;
}

.meta-capsule:hover {
    transform: translateY(-1px);
    box-shadow:
        4px 4px 8px rgba(0, 0, 0, 0.3),
        inset 1px 1px 2px rgba(255, 255, 255, 0.2);
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.05));
}

.meta-capsule i {
    opacity: 0.7;
    font-size: 0.8rem;
}

/* 特定类型胶囊微调 */
.time-capsule {
    color: #a5b4fc;
    /* Indigo tint */
    border-color: rgba(165, 180, 252, 0.2);
}

.category-capsule {
    color: #6ee7b7;
    /* Emerald tint */
    border-color: rgba(16, 185, 129, 0.2);
    background: linear-gradient(145deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.05));
}

.tag-capsule {
    color: #93c5fd;
    /* Blue tint */
    border-color: rgba(59, 112, 252, 0.2);
    background: linear-gradient(145deg, rgba(59, 112, 252, 0.15), rgba(59, 112, 252, 0.05));
}

/* Markdown 渲染样式覆盖 */
.reader-content {
    color: #e0e0e0;
    line-height: 1.8;
    font-family: -apple-system, sans-serif;
}

.reader-content h1,
.reader-content h2 {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 8px;
    margin-top: 24px;
    color: white;
}

.reader-content p {
    margin-bottom: 16px;
}

.reader-content a {
    color: #667eea;
    text-decoration: none;
}

.reader-content a:hover {
    text-decoration: underline;
}

.reader-content blockquote {
    border-left: 4px solid var(--primary-color);
    padding-left: 16px;
    color: var(--text-muted);
    font-style: italic;
    margin: 0;
}

.reader-content img {
    max-width: 100%;
    border-radius: 8px;
}

.reader-content code {
    background: rgba(255, 255, 255, 0.1);
    padding: 2px 4px;
    border-radius: 4px;
    font-family: monospace;
}

.reader-content pre {
    background: rgba(0, 0, 0, 0.3);
    padding: 16px;
    border-radius: 8px;
    overflow-x: auto;
}

/* APlayer 容器 */
.aplayer {
    margin: 20px 0;
    border-radius: 8px;
    overflow: hidden;
}

/* =========================================
   4. 写作模式 (Writer Mode)
   ========================================= */
.writer-mode {
    flex: 1;
    display: flex;
    flex-direction: column;
    animation: fadeIn 0.3s;
}

.metadata-form {
    padding: 20px 30px;
    background: rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.meta-header {
    display: flex;
    gap: 20px;
    margin-bottom: 16px;
}

.title-input {
    flex: 1;
    background: transparent;
    border: none;
    font-size: 1.5rem;
    font-weight: 700;
    color: white;
    border-bottom: 2px solid transparent;
    /* default hidden */
}

.title-input:focus {
    outline: none;
    border-bottom-color: var(--primary-color);
}

.meta-actions {
    display: flex;
    gap: 10px;
}

.cancel-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border: none;
    cursor: pointer;
    transition: 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.cancel-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
}

.publish-btn {
    padding: 0 20px;
    background: var(--primary-gradient);
    border: none;
    border-radius: 20px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s;
    display: flex;
    align-items: center;
    gap: 6px;
}

.publish-btn:hover {
    box-shadow: 0 0 15px var(--primary-glow);
    transform: translateY(-1px);
}

.publish-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.meta-tags {
    display: flex;
    gap: 12px;
}

.meta-input {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 8px 12px;
    border-radius: 8px;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.meta-input:focus {
    outline: none;
    border-color: var(--primary-color);
    background: rgba(0, 0, 0, 0.2);
}

.editor-wrapper {
    flex: 1;
    overflow: hidden;
    position: relative;
}

.EasyMDEContainer {
    border-radius: 0 0 16px 16px;
    background: transparent !important;
}

.CodeMirror {
    padding: 30px !important;
    background: transparent !important;
    /* 核心修复：去白底 */
    color: #eee !important;
    border: none !important;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
}

/* 修复光标颜色 (亮白色) */
.CodeMirror-cursor {
    border-left: 2px solid #fff !important;
    border-right: none !important;
    width: 0 !important;
}

/* 修复选中文字背景 (半透明蓝) */
.CodeMirror-selected {
    background: rgba(59, 112, 252, 0.4) !important;
}

.CodeMirror-focused .CodeMirror-selected {
    background: rgba(59, 112, 252, 0.4) !important;
}

.CodeMirror-line::selection,
.CodeMirror-line>span::selection,
.CodeMirror-line>span>span::selection {
    background: rgba(59, 112, 252, 0.4) !important;
}

.editor-toolbar {
    border: none !important;
    background: rgba(0, 0, 0, 0.2) !important;
    padding: 10px 20px !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05) !important;
}

.editor-toolbar i {
    color: rgba(255, 255, 255, 0.8) !important;
}

.editor-toolbar button:hover {
    background: rgba(255, 255, 255, 0.1) !important;
}

.editor-toolbar button.active {
    background: rgba(59, 112, 252, 0.3) !important;
    border-color: var(--primary-color) !important;
}

/* 修复预览模式 (全覆盖) */
.editor-preview {
    background: rgba(20, 20, 30, 0.85) !important;
    backdrop-filter: blur(50px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(50px) saturate(180%) !important;
    color: #e0e0e0 !important;
    border: none !important;
    padding: 20px !important;
    z-index: 10 !important;
}

/* 修复双栏预览 (Side-by-Side) */
.editor-preview-side {
    background: transparent !important;
    /* 双栏模式下背景透明，透出 writer-mode 或全屏的毛玻璃背景 */
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    color: #e0e0e0 !important;
    border: none !important;
    border-left: 1px solid rgba(255, 255, 255, 0.1) !important;
    /* 仅保留左边框 */
    padding: 20px !important;
    z-index: 10 !important;
}

/* 修复全屏模式下的重叠问题 */
.EasyMDEContainer.EasyMDEContainer-fullscreen {
    z-index: 99999 !important;
    /* 确保覆盖所有自定义 UI */
    background: transparent !important;
    /* 让伪元素负责背景，实现磨砂 */
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    padding: 0 !important;
}

/* 全屏强力高斯模糊背景 */
.EasyMDEContainer.EasyMDEContainer-fullscreen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* 用户要求：直接加上一个高斯模糊开最大，透明度也改一下 */
    background: rgba(20, 20, 30, 0.85);
    /* 深色底，高不透明度 */
    backdrop-filter: blur(50px) saturate(180%);
    -webkit-backdrop-filter: blur(50px) saturate(180%);
    z-index: -1;
}

/* 全屏模式下，隐藏其他所有干扰元素 (禅模式) */
body.fullscreen-active .glass-nav,
body.fullscreen-active .sidebar,
body.fullscreen-active .metadata-form,
body.fullscreen-active .sidebar-overlay,
body.fullscreen-active .welcome-mode,
body.fullscreen-active .reader-mode,
body.fullscreen-active #aplayer,
body.fullscreen-active .aplayer {
    display: none !important;
}

/* 全屏下的编辑区域优化 */
.EasyMDEContainer.EasyMDEContainer-fullscreen .CodeMirror {
    height: calc(100vh - 60px) !important;
    /* 减去工具栏高度 */
    width: 100% !important;
    max-width: 900px !important;
    /* 限制阅读宽度 */
    margin: 0 auto !important;
    /* 居中 */
    padding-top: 40px !important;
}

/* 全屏下的工具栏优化 */
.EasyMDEContainer.EasyMDEContainer-fullscreen .editor-toolbar {
    width: 100% !important;
    max-width: 900px !important;
    margin: 0 auto !important;
    border-radius: 0 0 12px 12px !important;
    background: rgba(255, 255, 255, 0.05) !important;
    top: 0 !important;
}

.editor-preview h1,
.editor-preview h2,
.editor-preview h3 {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: #fff;
}

.editor-preview pre {
    background: rgba(0, 0, 0, 0.3);
}


/* 欢迎页/空状态 - 拟物玻璃拟态 (与 Admin 一致) */
.welcome-mode {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: white;
    animation: fadeIn 0.5s var(--ease-out-expo);
    /* 深色玻璃背景 */
    background: rgba(10, 20, 40, 0.7);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    /* 拟物阴影 */
    box-shadow:
        var(--glass-shadow),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
    transition: transform 0.3s var(--ease-out-expo);
}

.welcome-content {
    max-width: 400px;
}

.welcome-logo {
    font-size: 4rem;
    margin-bottom: 20px;
    background: linear-gradient(135deg, #fff 0%, #a5b4fc 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 20px rgba(165, 180, 252, 0.3));
    animation: float 6s ease-in-out infinite;
}

.welcome-mode h2 {
    font-weight: 300;
    margin-bottom: 10px;
    letter-spacing: 1px;
}

.welcome-mode p {
    color: var(--text-secondary);
    margin-bottom: 30px;
    font-size: 0.95rem;
}

.primary-btn {
    padding: 10px 28px;
    border-radius: 50px;
    background: var(--primary-gradient);
    color: white;
    border: none;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(59, 112, 252, 0.3);
    transition: 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.primary-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 112, 252, 0.5);
}

/* =========================================
   6. Flatpickr Glass Theme (Overrides)
   ========================================= */
.flatpickr-calendar {
    background: rgba(30, 32, 45, 0.9) !important;
    backdrop-filter: blur(25px) !important;
    -webkit-backdrop-filter: blur(25px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6) !important;
    border-radius: 16px !important;
    width: 320px !important;
    /* Slightly wider */
    padding: 15px !important;
    color: #fff !important;
    z-index: 99999 !important;
    overflow: visible !important;
    /* Prevent time clipping */
}

/* Hide Triangle */
.flatpickr-calendar:before,
.flatpickr-calendar:after {
    display: none !important;
}

/* Header Area */
.flatpickr-months {
    align-items: center !important;
    margin-bottom: 15px !important;
    position: relative !important;
    height: 40px !important;
}

.flatpickr-current-month {
    padding-top: 0 !important;
    height: 100% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    position: absolute !important;
    width: 100% !important;
    /* Full width for centering */
    left: 0 !important;
}

/* Month Dropdown (Glass) */
.flatpickr-current-month .flatpickr-monthDropdown-months {
    appearance: none !important;
    -webkit-appearance: none !important;
    background: transparent !important;
    border: none !important;
    border-radius: 8px !important;
    color: #fff !important;
    font-weight: 700 !important;
    padding: 4px 8px !important;
    cursor: pointer !important;
    text-align: right !important;
    font-size: 1.1rem !important;
}

.flatpickr-current-month .flatpickr-monthDropdown-months:hover {
    background: rgba(255, 255, 255, 0.1) !important;
}

/* Option styles (Browser Constraint: Cannot be transparent glass) 
   Solution: Solid Dark Color to match theme */
.flatpickr-current-month .flatpickr-monthDropdown-months option {
    background-color: #1e1e28 !important;
    /* Dark background */
    color: #fff !important;
    padding: 10px !important;
}

/* Year Input */
.flatpickr-current-month input.cur-year {
    color: #fff !important;
    font-weight: 700 !important;
    font-size: 1.1rem !important;
    padding: 0 0 0 5px !important;
    margin: 0 !important;
    height: auto !important;
    display: inline-block !important;
    vertical-align: middle !important;
}

/* Year Arrows */
.flatpickr-current-month .numInputWrapper span.arrowUp:after {
    border-bottom-color: #fff !important;
}

.flatpickr-current-month .numInputWrapper span.arrowDown:after {
    border-top-color: #fff !important;
}

/* Nav Arrows (< >) Alignment - Absolute positioning relative to container */
.flatpickr-months .flatpickr-prev-month,
.flatpickr-months .flatpickr-next-month {
    top: 50% !important;
    transform: translateY(-50%) !important;
    height: 32px !important;
    width: 32px !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: 50% !important;
    position: absolute !important;
    z-index: 10 !important;
    margin: 0 !important;
    /* Remove default margins */
}

.flatpickr-months .flatpickr-prev-month {
    left: 10px !important;
}

.flatpickr-months .flatpickr-next-month {
    right: 10px !important;
}

.flatpickr-months .flatpickr-prev-month svg,
.flatpickr-months .flatpickr-next-month svg {
    width: 14px !important;
    height: 14px !important;
    fill: #fff !important;
    opacity: 0.7;
    position: static !important;
    /* Fix SVG positioning */
}

.flatpickr-months .flatpickr-prev-month:hover,
.flatpickr-months .flatpickr-next-month:hover {
    background: rgba(255, 255, 255, 0.1) !important;
}

.flatpickr-months .flatpickr-prev-month:hover svg,
.flatpickr-months .flatpickr-next-month:hover svg {
    fill: #fff !important;
    opacity: 1;
}

/* Weekdays & Days */
.flatpickr-weekdays {
    margin-top: 5px !important;
    background: transparent !important;
}

span.flatpickr-weekday {
    color: rgba(255, 255, 255, 0.6) !important;
}

.flatpickr-day {
    color: #fff !important;
    border-radius: 8px !important;
    margin-top: 2px !important;
}

.flatpickr-day.today {
    border: 1px solid rgba(255, 255, 255, 0.5) !important;
}

.flatpickr-day:hover,
.flatpickr-day:focus {
    background: rgba(255, 255, 255, 0.15) !important;
    border: none !important;
}

.flatpickr-day.selected {
    background: var(--primary-color) !important;
    border-color: var(--primary-color) !important;
    box-shadow: 0 4px 15px rgba(59, 112, 252, 0.4) !important;
}

.flatpickr-day.prevMonthDay,
.flatpickr-day.nextMonthDay {
    color: rgba(255, 255, 255, 0.2) !important;
}

/* Time Picker - Fix Clipping & Alignment */
.flatpickr-time {
    margin-top: 25px !important;
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
    padding-top: 20px !important;
    padding-bottom: 10px !important;
    height: auto !important;
    overflow: visible !important;
    display: flex !important;
    /* Force Flex */
    align-items: center !important;
    /* Vertical Center */
    justify-content: center !important;
    /* Horizontal Center */
    gap: 5px !important;
    /* Space between elements */
}

/* Time Inputs (Capsule Style) */
.flatpickr-time .numInputWrapper {
    height: 40px !important;
    flex: 0 0 auto !important;
    width: 70px !important;
    /* Fixed width for better alignment */
}

.flatpickr-time input {
    color: #fff !important;
    background: rgba(255, 255, 255, 0.05) !important;
    /* Subtle box */
    border-radius: 8px !important;
    height: 100% !important;
    line-height: normal !important;
    /* Reset line-height */
    font-size: 1.1rem !important;
    font-weight: bold !important;
    padding: 0 !important;
}

/* Separator (:) */
.flatpickr-time .flatpickr-time-separator {
    color: rgba(255, 255, 255, 0.9) !important;
    font-weight: bold !important;
    height: 40px !important;
    line-height: 40px !important;
    /* Center vertically */
    display: inline-block !important;
    float: none !important;
    /* Remove float if any */
}

.flatpickr-time .flatpickr-am-pm {
    color: #fff !important;
    height: 40px !important;
    line-height: 40px !important;
    background: rgba(255, 255, 255, 0.05) !important;
    border-radius: 8px !important;
    cursor: pointer !important;
    width: 50px !important;
}

.flatpickr-time input:hover,
.flatpickr-time .flatpickr-am-pm:hover,
.flatpickr-time input:focus,
.flatpickr-time .flatpickr-am-pm:focus {
    background: rgba(255, 255, 255, 0.15) !important;
}

.aplayer {
    background: rgba(255, 255, 255, 0.05) !important;
    box-shadow: none !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 12px !important;
    color: #fff !important;
}

.aplayer .aplayer-info {
    border-bottom: none !important;
}

.aplayer .aplayer-body {
    background: transparent !important;
}

.aplayer .aplayer-list ol li {
    border-top: 1px solid rgba(255, 255, 255, 0.05) !important;
}

.aplayer .aplayer-list ol li:hover {
    background: rgba(255, 255, 255, 0.1) !important;
}

.aplayer .aplayer-list ol li.aplayer-list-light {
    background: rgba(59, 112, 252, 0.2) !important;
}

.aplayer .aplayer-info .aplayer-music .aplayer-title {
    color: #fff !important;
}

.aplayer .aplayer-info .aplayer-music .aplayer-author {
    color: rgba(255, 255, 255, 0.5) !important;
}

.aplayer .aplayer-lrc:before,
.aplayer .aplayer-lrc:after {
    background: transparent !important;
    /* 移除歌词渐变遮罩 */
}

.aplayer .aplayer-lrc p {
    color: rgba(255, 255, 255, 0.6) !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.aplayer .aplayer-lrc p.aplayer-lrc-current {
    color: #fff !important;
    font-weight: bold;
    font-size: 1.1em;
}

/* =========================================
   3. 拟物化模态框 (Modal)
   ========================================= */
#modal-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
}

#modal-container.visible {
    pointer-events: auto;
    opacity: 1;
}

.glass-modal {
    /* 拟物玻璃拟态 (与 Admin 一致) */
    background: rgba(10, 20, 40, 0.9);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    width: 400px;
    max-width: 90%;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    /* 拟物阴影 */
    box-shadow:
        0 20px 50px rgba(0, 0, 0, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    padding: 24px;
    transform: scale(0.9) translateY(20px);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    display: flex;
    flex-direction: column;
    gap: 16px;
}

#modal-container.visible .glass-modal {
    transform: scale(1) translateY(0);
}

.modal-header h3 {
    margin: 0;
    color: white;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

.modal-body p {
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.5;
    margin: 0;
    font-size: 1rem;
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-top: 8px;
}

.modal-btn {
    border: none;
    padding: 10px 24px;
    border-radius: 20px;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    width: auto !important;
    min-width: 80px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
}

.modal-btn.modal-cancel-btn {
    background: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.8);
}

.modal-btn.modal-cancel-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    color: white;
}

.modal-btn.modal-confirm-btn {
    background: var(--primary-color);
    color: white;
    box-shadow: 0 4px 10px var(--primary-glow);
}

.modal-btn.modal-confirm-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px var(--primary-glow);
}

.modal-btn:active {
    transform: scale(0.96);
}

/* 移动端适配 */
@media (max-width: 768px) {

    /* --- Sidebar & Layout --- */
    .sidebar {
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        z-index: 300;
        border-radius: 0 16px 16px 0;
        transform: translateX(-100%);
        width: 85%;
        /* Slightly wider for better touch targets */
        box-shadow: 10px 0 30px rgba(0, 0, 0, 0.5);
    }

    .sidebar.open {
        transform: translateX(0);
    }

    .sidebar-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        z-index: 250;
        display: none;
        backdrop-filter: blur(4px);
        /* Enhanced Blur */
        -webkit-backdrop-filter: blur(4px);
    }

    .sidebar.open+.sidebar-overlay {
        display: block;
    }

    .main-content {
        padding: 12px;
        /* Reduced padding */
        gap: 12px;
    }

    /* --- Login Page --- */
    .login-card {
        padding: 2.5rem 1.5rem;
        /* Reduced padding */
        width: 90%;
        max-width: none;
    }

    .login-icon {
        font-size: 3rem;
    }

    .login-title {
        margin-bottom: 2rem;
        font-size: 1.2rem;
    }

    /* --- Editor (Writer Mode) --- */
    .writer-mode {
        border-radius: 8px;
        /* Smaller radius */
    }

    .editor-wrapper {
        border-radius: 8px;
    }

    .meta-header {
        flex-direction: column;
        gap: 12px;
        padding: 16px;
        align-items: stretch;
        /* Full width items */
    }

    .title-input {
        font-size: 1.1rem;
        padding: 8px 0;
        text-align: center;
        width: 100%;
    }

    .meta-actions {
        width: 100%;
        justify-content: space-between;
        gap: 12px;
    }

    /* 修复：仅让发布按钮拉伸，取消按钮保持圆形 */
    .meta-actions .publish-btn {
        flex: 1;
        justify-content: center;
    }

    .meta-actions .cancel-btn {
        flex: 0 0 42px;
        /* 固定宽度，比 PC 端稍大 */
        height: 42px;
        /* 固定高度 */
        border-radius: 50%;
        /* 保持圆形 */
        font-size: 1.1rem;
    }

    .meta-tags-container {
        flex-direction: column;
        gap: 10px;
    }

    .meta-group {
        width: 100%;
        flex: 0 0 auto !important;
        /* Force full width override */
        height: auto;
        /* Allow auto height */
        min-height: 48px;
        /* Larger touch target */
        padding: 8px 12px;
    }

    /* Improved Touch Targets for Capsules */
    .capsule-tag {
        padding: 4px 12px;
        height: 28px;
    }

    /* EasyMDE Toolbar Fix */
    .editor-toolbar {
        overflow-x: auto;
        /* Scrollable if too wide */
        white-space: nowrap;
        padding: 0 10px;
        -webkit-overflow-scrolling: touch;
        border-radius: 8px 8px 0 0;
    }

    .editor-toolbar i {
        font-size: 18px !important;
        /* Larger icons */
    }

    .editor-toolbar button {
        width: 36px !important;
        height: 36px !important;
    }

    .CodeMirror {
        padding: 10px;
        /* Reduced padding */
        font-size: 16px;
        /* Prevent iOS zoom */
        border-radius: 0 0 8px 8px;
    }

    /* --- Reader Mode --- */
    .reader-mode {
        padding: 24px 20px;
        /* 增加左右内边距 */
        border-radius: 8px;
    }

    .reader-header {
        margin-bottom: 20px;
        /* 增加底部间距 */
        flex-direction: column;
        /* 修复：改为列布局，避免 h1 被按钮挤压成竖排 */
        align-items: stretch;
        /* 拉伸子元素占满宽度 */
        gap: 16px;
        /* 标题和按钮之间的间距 */
    }

    .reader-header h1 {
        font-size: 1.5rem;
        /* 稍微增大字号以提升可读性 */
        line-height: 1.4;
        margin-bottom: 16px;
        writing-mode: horizontal-tb;
        /* 强制横向书写，修复竖排问题 */
        word-break: break-word;
        /* 允许长单词换行 */
        white-space: normal;
        /* 允许正常换行 */
        text-align: left;
        /* 左对齐 */
        width: 100%;
        /* 占满宽度 */
    }

    .reader-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 24px;
    }

    .meta-capsule {
        padding: 6px 14px;
        /* 增加内边距 */
        font-size: 0.85rem;
        min-height: 32px;
        /* 确保最小高度 */
        display: inline-flex;
        align-items: center;
    }

    .reader-actions {
        margin-top: 20px;
        width: 100%;
        display: flex;
        gap: 16px;
        /* 增加间距从 12px 到 16px */
    }

    .reader-actions button {
        flex: 1;
        justify-content: center;
        padding: 14px;
        /* 增加内边距从 10px 到 14px */
        min-height: 48px;
        /* 确保最小触控目标为 48px */
        font-size: 0.95rem;
    }

    .reader-content {
        line-height: 1.8;
        /* 增加行高提升可读性 */
        font-size: 1rem;
    }

    /* 确保内容中的标题不会竖排 */
    .reader-content h1,
    .reader-content h2,
    .reader-content h3,
    .reader-content h4,
    .reader-content h5,
    .reader-content h6 {
        writing-mode: horizontal-tb;
        word-break: break-word;
        white-space: normal;
    }

    /* --- Nav --- */
    .glass-nav {
        padding: 0 16px;
        height: 56px;
    }

    .logo-text {
        font-size: 1rem;
    }

    /* --- Modal - Mobile Optimized --- */
    .glass-modal {
        width: 90%;
        padding: 24px 20px;
        gap: 20px;
    }

    .modal-actions {
        width: 100%;
        gap: 12px;
    }

    .modal-btn {
        flex: 1;
        padding: 12px 0;
        /* Taller buttons */
        font-size: 1rem;
    }
}

/* =========================================
   Custom Split View Styles (Desktop)
   ========================================= */

/* Use row direction when split is active */
.editor-wrapper.split-active {
    flex-direction: row;
    gap: 20px;
    align-items: stretch;
}

/* Adjust EasyMDE container in split mode */
.editor-wrapper.split-active .EasyMDEContainer {
    width: 50%;
    flex: 1;
    max-width: 50%;
    display: flex;
    flex-direction: column;
}

.editor-wrapper.split-active .EasyMDEContainer .CodeMirror {
    height: 100% !important;
}


/* Custom Preview Container */
.custom-split-preview {
    flex: 1;
    width: 50%;
    overflow-y: auto;
    padding: 30px;
    background: rgba(30, 60, 114, 0.65);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.18);
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    color: var(--text-primary);
    animation: fadeInEditor 0.3s ease-out;
}

/* =========================================
   Zen Mode Styles (Immersive Glass)
   ========================================= */
.writer-mode.zen-mode {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw;
    height: 100vh;
    z-index: 9999;
    /* Highest priority */
    margin: 0;
    border-radius: 0;
    /* 拟物化：深度磨砂玻璃，而非纯色 */
    background: rgba(15, 23, 42, 0.85);
    backdrop-filter: blur(60px) saturate(180%);
    -webkit-backdrop-filter: blur(60px) saturate(180%);
    /* 内阴影营造沉浸感 */
    box-shadow: inset 0 0 150px rgba(0, 0, 0, 0.6);
    padding: 20px 8%;
    /* Centered content with breathing room */
    border: none;
    display: flex;
    flex-direction: column;
}

/* Fix wrapper height in Zen Mode */
.writer-mode.zen-mode .editor-wrapper {
    flex: 1;
    /* Occupy remaining space */
    height: auto;
    /* Reset fixed height if any */
    overflow: hidden;
    /* Contain internal scrolls */
}

/* Ensure toolbar looks good in Zen Mode */
.writer-mode.zen-mode .editor-toolbar {
    border-color: rgba(255, 255, 255, 0.1);
    background: transparent;
    margin-bottom: 10px;
}

/* Zen Mode + Split View Layout Adaptation */
.writer-mode.zen-mode .editor-wrapper.split-active {
    display: flex;
    flex-direction: row;
    gap: 30px;
    align-items: stretch;
    height: 100%;
}

.writer-mode.zen-mode .editor-wrapper.split-active .EasyMDEContainer,
.writer-mode.zen-mode .custom-split-preview {
    height: 100%;
    /* Force full height */
    flex: 1;
    overflow: hidden;
    /* Internal scrolling */
}

.writer-mode.zen-mode .custom-split-preview {
    background: rgba(255, 255, 255, 0.03);
    /* Lighter glass for contrast */
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
}

.writer-mode.zen-mode .EasyMDEContainer .CodeMirror {
    height: 100% !important;
}

/* =========================================
   Toast 通知组件 (Shared via admin.css)
   ========================================= */
.toast-container {
    position: fixed;
    top: 24px;
    right: 24px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 12px;
    pointer-events: none;
}

.toast {
    background: rgba(20, 40, 80, 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 14px;
    padding: 16px 24px;
    display: flex;
    align-items: center;
    gap: 14px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05);
    min-width: 280px;
    max-width: 420px;
    pointer-events: auto;
    animation: toastSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform-origin: right center;
}

.toast.toast-exit {
    animation: toastSlideOut 0.3s ease-in forwards;
}

.toast-icon {
    font-size: 1.4rem;
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.08);
}

/* 类型颜色 */
.toast.success .toast-icon {
    background: rgba(16, 185, 129, 0.2);
    color: #34d399;
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
}

.toast.warning .toast-icon {
    background: rgba(251, 191, 36, 0.2);
    color: #fcd34d;
    box-shadow: 0 0 15px rgba(251, 191, 36, 0.3);
}

.toast.error .toast-icon {
    background: rgba(239, 68, 68, 0.2);
    color: #f87171;
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);
}

.toast.info .toast-icon {
    background: rgba(59, 112, 252, 0.2);
    color: #60a5fa;
    box-shadow: 0 0 15px rgba(59, 112, 252, 0.3);
}

.toast-content {
    flex: 1;
}

.toast-message {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
    line-height: 1.4;
}

.toast-close {
    background: none;
    border: none;
    color: rgba(255, 255, 255, 0.4);
    cursor: pointer;
    padding: 6px;
    border-radius: 50%;
    transition: all 0.2s;
    font-size: 0.85rem;
}

.toast-close:hover {
    color: #fff;
    background: rgba(255, 255, 255, 0.1);
}

/* Toast 动画 */
@keyframes toastSlideIn {
    from {
        opacity: 0;
        transform: translateX(100%) scale(0.8);
    }

    to {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

@keyframes toastSlideOut {
    from {
        opacity: 1;
        transform: translateX(0) scale(1);
    }

    to {
        opacity: 0;
        transform: translateX(50%) scale(0.9);
    }
}